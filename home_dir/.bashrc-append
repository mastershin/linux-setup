# To be appened to .bashrc

# allow ssh and change to current directory in a remote host (for network path only)
sshcd() { ssh -t $1 "cd '$(pwd)'; ${@:2}"; }

# if __git_ps1 is not found, download git-prompt.sh and put in user dir or system-wide path.
# sudo curl -o /etc/bash_completion.d/git-prompt.sh https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh
#
# or if no sudo, then, save to home directory, and uncomment second line
# curl -o ~/.git-prompt.sh https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh
# . ~/.git-prompt.sh

# hub
# eval "$(hub alias -s)"

# colors!
red="\[\033[38;5;203m\]"
green="\[\033[38;05;38m\]"
blue="\[\033[0;34m\]"
reset="\[\033[0m\]"
yellow="\033[0;33m"
ochre="\033[38;5;95m"
white="\033[0;37m"

function timer_start {
  timer=${timer:-$SECONDS}
}
function timer_stop {
  timer_show=$(($SECONDS - $timer))
  unset timer
}
trap 'timer_start' DEBUG
if [ "$PROMPT_COMMAND" == "" ]; then
  PROMPT_COMMAND="timer_stop"
else
  PROMPT_COMMAND="$PROMPT_COMMAND; timer_stop"
fi
PROMPT_COMMAND="$PROMPT_COMMAND; history -a"

export GIT_PS1_SHOWDIRTYSTATE=1

# '\u' adds the name of the current user to the prompt
# '\$(__git_ps1)' adds git-related stuff
# '\W' adds the name of the current directory
RETURN_STATUS="\$([ \$? == 0 ] && echo ✅  || echo ⚠️ )"
PS1="$RETURN_STATUS"' [${timer_show}s]'" ${reset}\u ${blue}<I'm successful!> $red\h$green\$(__git_ps1)$blue \w
$ $reset"

# only if autojump is installed
. /usr/share/autojump/autojump.sh
